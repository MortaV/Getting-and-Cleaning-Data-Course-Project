# Code Book

## Raw Data
 Raw data for this project can be found [here](https://d396qusza40orc.cloudfront.net/getdata%2Fprojectfiles%2FUCI%20HAR%20Dataset.zip). As it is described by original data owners, data set contains:
 >The experiments have been carried out with a group of 30 volunteers within an age bracket of 19-48 years. Each person performed six activities (WALKING, WALKING_UPSTAIRS, WALKING_DOWNSTAIRS, SITTING, STANDING, LAYING) wearing a smartphone (Samsung Galaxy S II) on the waist. Using its embedded accelerometer and gyroscope, we captured 3-axial linear acceleration and 3-axial angular velocity at a constant rate of 50Hz. The experiments have been video-recorded to label the data manually. The obtained dataset has been randomly partitioned into two sets, where 70% of the volunteers was selected for generating the training data and 30% the test data.
The sensor signals (accelerometer and gyroscope) were pre-processed by applying noise filters and then sampled in fixed-width sliding windows of 2.56 sec and 50% overlap (128 readings/window). The sensor acceleration signal, which has gravitational and body motion components, was separated using a Butterworth low-pass filter into body acceleration and gravity. The gravitational force is assumed to have only low frequency components, therefore a filter with 0.3 Hz cutoff frequency was used. From each window, a vector of features was obtained by calculating variables from the time and frequency domain.

## Transformations

As the original data set did not met the conditions of a tidy data set, there were several transformations applied to it. The R code which takes raw data set and transforms it to tidy one is provided in this repository and is called *run_analysis.R*. It includes:

### Transformations of original data set

 1. Downloading the zip file with the raw data set and all additional files to a folder called *data* (if such folder doesn't exist in the working directory, such folder is created).
 2. Unzipping downloaded folder.
 3. Train and Test files are joined with activity and subject information, column names from *features.txt* are added.
 4. Train and Test from step 3 are bind together.
 5. Only columns containing *mean()* or *std()* are left.
 6. Activity names are added as *activity* from *activity_labels.txt*.
 7. Activity IDs are removed as they are not informative.
 8. Column names are changed:
    + column names representing measures are gathered to one column called *dimension*;
    + *dimension* is separated into 3 different columns *signal*, *value*, *direction* by "-" as a separator;
    + *signal* is spread again into *domaintype* (first character of *signal*) and *signal* (everything except the first character of *signal*);
    + *domaintype* value is changed to "Time" if *domaintype* is "t" and "Frequency" otherwise;
    + *signal* is given several changes:
      - *Acc* changed to *Accelerometer*;
      - *Gyro* changed to *Gyroscope*;
      - *Mag* changed to *Magnitude*;
      - *BodyBody* changed to *Body* (probably it was just a typo in the original data set).
    + *value* changed to "Mean" if it was "mean()" before or to "StDev" otherwise;
    + *direction* changed to "withoutaxis" if value was NA, or to *direction*+"axis" otherwise.
9. *domaintype*, *signal*, *value* and *direction* were united back to a column named *measuretospread* (without any separator);
10. Dummy variable was created (rank of row number in a group of *activity*, *subject* and *measuretospread*) was created to spread *measuretospread* back to column names. After thsi transformation, dummy variable was deleted.
11. Data set is ungrouped.

### Transformations of individual second data set

1. Tidy version of original data set is grouped by *activity* and *subject*.
2. Mean of each variable is calculated.
3. Names of mean columns are changed to "MeanOf"+original column name.

## Variables in the data set which is generated by the R script

The R script will create a tidy data set with the following columns:

Column Name | Description
------------|------------
Test | Test
